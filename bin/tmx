#!/bin/bash

HOST=$(hostname)

hash_string256() {
    hash_value=$(printf "%s" "$1" | md5sum |tr -d " -"| tr "a-f" "A-F")
    printf "ibase=16; (%s + %X) %% 100 \n" "$hash_value" "$2" | bc
}

if [ -n "$1" ];then
  tmux -2 list-sessions|awk '{print $0}'|grep "$HOST" > /dev/null
  if [ $? == 1 ];then
    echo "You need to start a new session before you can attach it"
    exit 1
  fi
  tmux -2 list-sessions|awk '{print $0}'|grep "$1" > /dev/null
  if [ $? == 1 ];then
    tmux new-session -d -t "$HOST" -s "$1"
  fi
  tmux attach -t "$1"
else
  # Create session
  tmux -2 new-session -d -s "$HOST"
  # Attach to session
  tmux -2 attach-session -t "$HOST"
fi

